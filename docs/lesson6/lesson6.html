<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lesson 6 - CS 6340: Software Analysis</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item "><a href="../lesson1/lesson1.html"><strong aria-hidden="true">1.</strong> Lesson 1</a></li><li class="chapter-item "><a href="../lesson2/lesson2.html"><strong aria-hidden="true">2.</strong> Lesson 2</a></li><li class="chapter-item "><a href="../lesson3/lesson3.html"><strong aria-hidden="true">3.</strong> Lesson 3</a></li><li class="chapter-item "><a href="../lesson4/lesson4.html"><strong aria-hidden="true">4.</strong> Lesson 4</a></li><li class="chapter-item "><a href="../lesson5/lesson5.html"><strong aria-hidden="true">5.</strong> Lesson 5</a></li><li class="chapter-item expanded "><a href="../lesson6/lesson6.html" class="active"><strong aria-hidden="true">6.</strong> Lesson 6</a></li><li class="chapter-item "><a href="../lesson7/lesson7.html"><strong aria-hidden="true">7.</strong> Lesson 7</a></li><li class="chapter-item "><a href="../lesson8/lesson8.html"><strong aria-hidden="true">8.</strong> Lesson 8</a></li><li class="chapter-item "><a href="../lesson9/lesson9.html"><strong aria-hidden="true">9.</strong> Lesson 9</a></li><li class="chapter-item "><a href="../lesson10/lesson10.html"><strong aria-hidden="true">10.</strong> Lesson 10</a></li><li class="chapter-item "><a href="../lesson11/lesson11.html"><strong aria-hidden="true">11.</strong> Lesson 11</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CS 6340: Software Analysis</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pointer-analysis"><a class="header" href="#pointer-analysis">Pointer Analysis</a></h1>
<p>In the previous lesson we learned about tracking the flow of primitive data
types like integers. In this lesson, we'll learn how to track and analyze more
complex types of data, namely pointers, objects, and references.</p>
<p>This sort of analysis is called <strong>pointer analysis</strong>.</p>
<h2 id="introducing-pointers"><a class="header" href="#introducing-pointers">Introducing pointers</a></h2>
<ul>
<li><strong>Field write</strong> - an operation where a value is written to an attribute of
a class or structure via a pointer to that object or structure.</li>
<li><strong>Field read</strong> - an operation where a value is read from an attribute of a
class or structure via a pointer to that object or structure.</li>
</ul>
<h2 id="pointer-aliasing"><a class="header" href="#pointer-aliasing">Pointer aliasing</a></h2>
<p><strong>Pointer aliasing</strong> is a situation in which the same address in memory is
referred to in different ways.</p>
<h2 id="approximation-to-the-rescue"><a class="header" href="#approximation-to-the-rescue">Approximation to the rescue</a></h2>
<p><strong>Pointer analysis</strong> is hard because there are so many different ways to
reference pointer values - the lectures provide the example of a linked list.
We must sacrifice some combination of <strong>soundness</strong>, <strong>completeness</strong>, and
<strong>termination</strong> in order to have a decidable pointer analysis. We sacrifice
completeness, causing us to have <strong>false positives, but no false negatives</strong>.</p>
<p>What does this mean? In the <strong>May-Alias</strong> case, a pointer may be aliased or it
may not. This creates a false positive because we'll have two determinations
about the outcome of a specific line of code - one of these will be a
<strong>false positive</strong>.</p>
<p>There are many sound, approximate algorithms for pointer analysis with varying
levels of precision. Most of these algorithms differ in two key aspects:</p>
<ul>
<li>How to abstract the <strong>heap</strong></li>
<li>How to abstract control-flow</li>
</ul>
<h2 id="abstracting-the-heap"><a class="header" href="#abstracting-the-heap">Abstracting the heap</a></h2>
<p><strong>Points-to Graph</strong> is an abstraction of allocations that occurs within the
program. It collapses arrays of allocated chunks into a single node, denoting
the existence or multiple chunks within a single array using an asterisk. This
abstraction is only concerned with creating a graph of relationships between
allocated objects, and creates directed edges based upon these allocations in
the source code.</p>
<h2 id="kinds-of-statements"><a class="header" href="#kinds-of-statements">Kinds of statements</a></h2>
<p>The following are the kinds of statements that we must track in order to
implement the pointer analysis chaotic iteration algorithm:</p>
<ul>
<li><strong>Object allocation</strong> - <code>v = new ...</code></li>
<li><strong>Object copy statement</strong> - <code>v = v2</code></li>
<li><strong>Field read</strong> - <code>v2 = v.f</code></li>
<li><strong>Field write</strong> - <code>v.f = v2</code></li>
<li><strong>Array-based field read</strong> - <code>v2 = v[*]</code></li>
<li><strong>Array-based field write</strong> - <code>v[*] = v2</code></li>
</ul>
<h2 id="rule-for-object-allocation-sites"><a class="header" href="#rule-for-object-allocation-sites">Rule for object allocation sites</a></h2>
<p>When an object is allocated, we use a weak re-assignment rule. Essentially, once
an object is allocated and assigned to a variable, a new node is created on the
graph and the variable points to the new node - if the variable didn't already
exist then it is created on the graph.</p>
<p>The weak re-assignment rule comes in when, if a variable already exists and
points to an object, we allow the variable to point to the new node recently
allocated, accumulating assignments.</p>
<h2 id="rule-for-object-copy"><a class="header" href="#rule-for-object-copy">Rule for object copy</a></h2>
<p>When an object is copied to a new variable, the new variable just copies all
existing edges to nodes of the copied variable. No existing nodes are
overwritten, just accumulated.</p>
<h2 id="rule-for-field-writes"><a class="header" href="#rule-for-field-writes">Rule for field writes</a></h2>
<p>In this example, if a variable points to Node A and another variable points to
Node B, when the field of the first variable is assigned to the second variable,
an edge is drawn between Node A and Node B. Thus, Node A's field is assigned
to be the value of the second variable, or Node B.</p>
<h2 id="rules-for-field-reads"><a class="header" href="#rules-for-field-reads">Rules for field reads</a></h2>
<p>In this example, we assigned a variable the value of another variable's field.
So if the second variable points to Node B, and Node B's field is assigned Node
C, then the first variable is assigned Node C (Node B's field).</p>
<h2 id="classifying-pointer-analysis-algorithms"><a class="header" href="#classifying-pointer-analysis-algorithms">Classifying pointer analysis algorithms</a></h2>
<p>The following are dimensions upon which pointer analysis algorithms are
classified:</p>
<ul>
<li>Is it flow-sensitive?</li>
<li>Is it context-sensitive?</li>
<li>What heap abstractions scheme is used?</li>
<li>How are aggregate data types modeled?</li>
</ul>
<h2 id="flow-sensitivity"><a class="header" href="#flow-sensitivity">Flow sensitivity</a></h2>
<p><strong>Flow sensitivity</strong> describes how an algorithm models control-flow <strong>within</strong>
a procedure. There are two kinds of flow sensitivity:</p>
<ul>
<li><strong>Flow-insensitive</strong> - weak updates on data, never killing any previously
generated facts.
<ul>
<li>Suffices for may-alias analysis</li>
</ul>
</li>
<li><strong>Flow-sensitive</strong> - strong updates on data, kills previously generated facts
when encountering new data
<ul>
<li>Required for must-alias analysis</li>
</ul>
</li>
</ul>
<h2 id="context-sensitivity"><a class="header" href="#context-sensitivity">Context sensitivity</a></h2>
<p><strong>Context sensitivity</strong> describes how an algorithm models control-flow
<strong>across</strong> procedures. There are two kinds of context sensitivity:</p>
<ul>
<li><strong>Context-insensitive</strong> - analyze each procedure only once, regardless of how
many times the program encounters a procedure</li>
<li><strong>Context-sensitive</strong> - analyze each procedure possibly multiple times, once
per abstract calling context</li>
</ul>
<h2 id="heap-abstraction"><a class="header" href="#heap-abstraction">Heap abstraction</a></h2>
<p><strong>Heap abstraction</strong> is the scheme to partition unbounded sets of concrete
objects into finitely many <strong>abstract objects</strong> - represented by oval nodes
in our point-to graph representations.</p>
<p><strong>Heap abstraction</strong> ensures that pointer analysis terminates. There are various
sound schemes, however, the following are determinations about precision and
efficiency for different schemes:</p>
<ul>
<li>Too few abstract objects results in <strong>efficient</strong> but <strong>imprecise</strong> analysis</li>
<li>Too many abstract objects results in <strong>expensive</strong> but <strong>precise</strong> analysis</li>
</ul>
<h3 id="scheme-1-allocation-site-based"><a class="header" href="#scheme-1-allocation-site-based">Scheme 1: allocation-site based</a></h3>
<p>This scheme of heap abstraction is the same one we covered during this lesson.
It tracks one abstract object per <strong>allocation site</strong>. Allocation sites are
identified by:</p>
<ul>
<li>the <strong>new</strong> keyword in Java/C++</li>
<li>the <strong>malloc()</strong> (or equivalent) call in C</li>
</ul>
<p>Because there are finitely many allocation sites in programs, this scheme
results in finitely many abstract objects.</p>
<h3 id="scheme-2-type-based"><a class="header" href="#scheme-2-type-based">Scheme 2: type based</a></h3>
<p>The allocation-site based scheme can be costly due to the following:</p>
<ul>
<li>The analysis of large programs</li>
<li>Clients needing a quick turnaround time for analysis</li>
<li>Overly fine granularity of sites unnecessary</li>
</ul>
<p>In the <strong>type based</strong> scheme, on abstract object is tracker per <strong>type</strong> in the
program. This results in finitely many types and finitely many abstract objects.</p>
<h3 id="scheme-3-heap-insensitive"><a class="header" href="#scheme-3-heap-insensitive">Scheme 3: heap-insensitive</a></h3>
<p>The <strong>heap-insensitive</strong> scheme tracks a <strong>single</strong> abstract object representing
the entire heap. This is obviously imprecise, but has its uses for programming
languages like C where stack-directed pointers derive better pointer analysis.
This scheme is unsuitable for languages that make great usage of the heap like
Java.</p>
<h2 id="modeling-aggregate-data-types-records"><a class="header" href="#modeling-aggregate-data-types-records">Modeling aggregate data types: records</a></h2>
<p>Three choices exist for the modeling of <strong>records</strong>, otherwise known as structs
or objects:</p>
<ol>
<li><strong>Field-insensitive</strong> - merge <strong>all</strong> fields of each record object</li>
</ol>
<ul>
<li>This makes it difficult for an analysis to track reads and writes to
specific attributes of an object or structure</li>
</ul>
<ol start="2">
<li><strong>Field-based</strong> - merge <strong>each</strong> field of all record objects</li>
</ol>
<ul>
<li>This makes it difficult for an analysis to distinguish between fields of
different objects or structures</li>
</ul>
<ol start="3">
<li><strong>Field-sensitive</strong> - keep <strong>each</strong> field of <strong>each</strong> record separate</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../lesson5/lesson5.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../lesson7/lesson7.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../lesson5/lesson5.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../lesson7/lesson7.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
